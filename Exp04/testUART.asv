function data = testUART(size, type)

function readSerial(src, ~)
    data = read(src,size,type);
end

device = serialport("COM4",9600);
flush(device);
data = [];

if (strcmp(type,'uint16'))
    size = 2;
elseif (strcmp(type, 'uint32'))
    size = 4;
elseif (strcmp(type, 'uint8'))
    size = 1;
end

configureCallback(device,"byte",20,@readSerial);
write(device,10,"uint8");

while (numel(data) < 10)
    pause(0.01);
end

delete(device);

end

